# ğŸ¨ DIAGRAMA VISUAL: FLUJO COMPLETO PLAYWRIGHT MCP

## ğŸ”„ FLUJO SECUENCIAL COMPLETO

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLUJO COMPLETO PASO A PASO                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PASO 1: USUARIO INGRESA TICKET
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USUARIO    â”‚  Ingresa: "QA-2333"
â”‚  (Browser)   â”‚  Click: "Generate Test"
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
PASO 2: FETCH JIRA ISSUE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TestGenerator.tsx                 â”‚
â”‚  fetchJiraIssue()                  â”‚
â”‚  â”œâ”€ GET /api/jira?issueKey=QA-2333 â”‚
â”‚  â””â”€ â†’ acceptanceCriteria = {      â”‚
â”‚         description: "Date Selector Filter Reset",
â”‚         framework: "playwright"
â”‚       }                           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
PASO 3: GENERAR TEST (Playwright MCP primero)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TestGenerator.tsx                 â”‚
â”‚  generateTestFromCriteria()       â”‚
â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ INTENTO 1: Playwright MCP    â”‚ â”‚
â”‚  â”‚                              â”‚ â”‚
â”‚  â”‚ fetch('/api/playwright-mcp',â”‚ â”‚
â”‚  â”‚   {                          â”‚ â”‚
â”‚  â”‚     method: 'POST',          â”‚ â”‚
â”‚  â”‚     body: {                  â”‚ â”‚
â”‚  â”‚       acceptanceCriteria:    â”‚ â”‚
â”‚  â”‚         "Date Selector..."  â”‚ â”‚
â”‚  â”‚     }                        â”‚ â”‚
â”‚  â”‚   }                          â”‚ â”‚
â”‚  â”‚ )                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                         â”‚
â”‚         â”‚ HTTP Request            â”‚
â”‚         â–¼                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
PASO 4: API PLAYWRIGHT MCP (SERVIDOR)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /api/playwright-mcp/route.ts                                    â”‚
â”‚                                                                  â”‚
â”‚  POST handler ejecutÃ¡ndose en SERVIDOR                          â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. Verificar credenciales                                  â”‚ â”‚
â”‚  â”‚    const hasCredentials =                                 â”‚ â”‚
â”‚  â”‚      process.env.TEST_EMAIL &&                            â”‚ â”‚
â”‚  â”‚      process.env.VALID_LOGIN_PASSWORD;                   â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚ â”‚
â”‚  â”‚    â”‚ Â¿Hay credenciales? â”‚                                 â”‚ â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚ â”‚
â”‚  â”‚              â”‚                                            â”‚ â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚ â”‚
â”‚  â”‚    â”‚                     â”‚                                 â”‚ â”‚
â”‚  â”‚    â–¼                     â–¼                                 â”‚ â”‚
â”‚  â”‚  âœ… SÃ                 âŒ NO                               â”‚ â”‚
â”‚  â”‚    â”‚                     â”‚                                 â”‚ â”‚
â”‚  â”‚    â”‚                     â”‚                                 â”‚ â”‚
â”‚  â”‚    â”‚                     â–¼                                 â”‚ â”‚
â”‚  â”‚    â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚ â”‚
â”‚  â”‚    â”‚         â”‚ MODO SIMULADO            â”‚                â”‚ â”‚
â”‚  â”‚    â”‚         â”‚                          â”‚                â”‚ â”‚
â”‚  â”‚    â”‚         â”‚ interpretAcceptance...() â”‚                â”‚ â”‚
â”‚  â”‚    â”‚         â”‚ simulateBehavior()       â”‚                â”‚ â”‚
â”‚  â”‚    â”‚         â”‚ generateTest...()        â”‚                â”‚ â”‚
â”‚  â”‚    â”‚         â”‚                          â”‚                â”‚ â”‚
â”‚  â”‚    â”‚         â”‚ return {                 â”‚                â”‚ â”‚
â”‚  â”‚    â”‚         â”‚   success: true,        â”‚                â”‚ â”‚
â”‚  â”‚    â”‚         â”‚   smartTest: "...",      â”‚                â”‚ â”‚
â”‚  â”‚    â”‚         â”‚   mode: 'simulated'      â”‚                â”‚ â”‚
â”‚  â”‚    â”‚         â”‚ }                        â”‚                â”‚ â”‚
â”‚  â”‚    â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚ â”‚
â”‚  â”‚    â”‚                         â”‚                          â”‚ â”‚
â”‚  â”‚    â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚ â”‚
â”‚  â”‚    â”‚                                         â”‚            â”‚ â”‚
â”‚  â”‚    â–¼                                         â–¼            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚ 2. MODO REAL (con Playwright)                    â”‚   â”‚ â”‚
â”‚  â”‚  â”‚                                                  â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  chromium.launch({ headless: true })           â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”œâ”€ â†’ Abre Chrome en SERVIDOR                   â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚    (no se ve en navegador del usuario)       â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                                â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  const context = await browser.newContext()     â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  const page = await context.newPage()           â”‚   â”‚ â”‚
â”‚  â”‚  â”‚                                                  â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ 3. LOGIN                                   â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                            â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  await page.goto('https://cook-unity.com/login') â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  await page.fill('input[name="email"]',    â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                process.env.TEST_EMAIL)     â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  await page.fill('input[name="password"]', â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                process.env.VALID_LOGIN_PASSWORD)â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  await page.click('button[type="submit"]') â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  await page.waitForURL('**/menu**')        â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                            â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ Â¿Login exitoso?         â”‚              â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚            â”‚                             â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚    â”‚                â”‚                   â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚    â–¼                â–¼                   â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  âœ… SÃ            âŒ NO                 â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚    â”‚                â”‚                   â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚    â”‚                â””â”€ browser.close() â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚    â”‚                return {            â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚    â”‚                  success: false,    â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚    â”‚                  fallback: true     â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚    â”‚                }                    â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚    â”‚                                    â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚    â–¼                                    â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ 4. NAVEGAR A URL OBJETIVO         â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                  â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ await page.goto(                â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   'https://cook-unity.com/orders-hub' â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ )                                 â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ await page.waitForLoadState('networkidle') â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                  â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ Â¿NavegaciÃ³n exitosa?     â”‚    â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚           â”‚                   â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   â”‚                â”‚         â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   â–¼                â–¼         â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ âœ… SÃ            âŒ NO        â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   â”‚                â”‚         â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   â”‚                â””â”€ browser.close()â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   â”‚                return {           â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   â”‚                  success: false,   â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   â”‚                  fallback: true    â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   â”‚                }                   â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   â”‚                                  â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   â–¼                                  â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ 5. OBSERVAR COMPORTAMIENTO      â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚                                â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ const elements = await        â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚   page.$$('[data-testid]')    â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚                                â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ for (const element of         â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚      elements) {              â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚   const isVisible = await     â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚     element.isVisible()       â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚   if (isVisible) {            â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚     const testId = await      â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚       element.getAttribute('data-testid') â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚     behavior.elements.push({   â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚       testId,                  â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚       text: await element.textContent() â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚     })                          â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚   }                             â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ }                               â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                   â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   â–¼                               â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ 6. GENERAR TEST                â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚                                â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ generateTestFromObservations() â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ â”œâ”€ Crear tÃ­tulo               â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ â”œâ”€ Determinar tags             â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ â”œâ”€ Agregar GIVEN               â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ â”œâ”€ Agregar WHEN (desde behavior)â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ â””â”€ Agregar THEN                â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚                                â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ const smartTest = "test('QA-2333... â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                     â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   â–¼                                 â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ 7. CERRAR NAVEGADOR             â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚                                â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ await browser.close()          â”‚ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                     â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   â–¼                                 â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ return {                           â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   success: true,                   â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   smartTest: "...",                â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   mode: 'real'                     â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ }                                  â”‚ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ HTTP Response
          â”‚ { success: true/false, smartTest: "...", ... }
          â–¼
PASO 5: TEST GENERATOR RECIBE RESPUESTA
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TestGenerator.tsx                 â”‚
â”‚                                    â”‚
â”‚  const mcpData = await mcpResponse.json() â”‚
â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ if (mcpData.success) {       â”‚ â”‚
â”‚  â”‚   âœ… Ã‰XITO                    â”‚ â”‚
â”‚  â”‚   setGeneratedTest({          â”‚ â”‚
â”‚  â”‚     content: mcpData.smartTestâ”‚ â”‚
â”‚  â”‚   })                          â”‚ â”‚
â”‚  â”‚   setStep('result')           â”‚ â”‚
â”‚  â”‚   return                      â”‚ â”‚
â”‚  â”‚ }                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ else {                       â”‚ â”‚
â”‚  â”‚   âŒ FALLÃ“                   â”‚ â”‚
â”‚  â”‚   â†’ Fallback a Smart Synapse â”‚ â”‚
â”‚  â”‚ }                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
PASO 6: MOSTRAR RESULTADO AL USUARIO
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USUARIO    â”‚
â”‚  (Browser)   â”‚
â”‚              â”‚
â”‚  âœ… Test generado â”‚
â”‚     apareciendo   â”‚
â”‚     en pantalla    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ DIAGRAMA DE COMUNICACIÃ“N

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CLIENTE    â”‚                    â”‚     SERVIDOR    â”‚
â”‚  (Browser)   â”‚                    â”‚    (Next.js)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                     â”‚
       â”‚ 1. POST /api/playwright-mcp        â”‚
       â”‚    { acceptanceCriteria: "..." }    â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                                     â”‚
       â”‚                                     â”‚ 2. chromium.launch()
       â”‚                                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                     â”‚                 â”‚
       â”‚                                     â”‚                 â–¼
       â”‚                                     â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                     â”‚        â”‚ Chromium Browserâ”‚
       â”‚                                     â”‚        â”‚  (Headless)     â”‚
       â”‚                                     â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                     â”‚                 â”‚
       â”‚                                     â”‚ 3. page.goto()  â”‚
       â”‚                                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                                     â”‚                 â”‚
       â”‚                                     â”‚ 4. Observa      â”‚
       â”‚                                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                                     â”‚                 â”‚
       â”‚                                     â”‚ 5. Genera test  â”‚
       â”‚                                     â”‚                 â”‚
       â”‚ 6. Response                         â”‚                 â”‚
       â”‚    { success: true,                 â”‚                 â”‚
       â”‚      smartTest: "..." }              â”‚                 â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
       â”‚                                     â”‚                 â”‚
       â”‚                                     â”‚ 7. browser.close()â”‚
       â”‚                                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                                     â”‚                 â”‚
       â”‚                                     â”‚                 â–¼
       â”‚                                     â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                     â”‚        â”‚   (Cerrado)     â”‚
       â”‚                                     â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                     â”‚
       â–¼                                     â–¼
```

---

## ğŸ“Š RESUMEN VISUAL

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  INTEGRACIÃ“N PLAYWRIGHT MCP                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    USUARIO
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TestGenerator   â”‚  â”€â”€â”€â”€â–º Prioridad 1: Playwright MCP
â”‚                 â”‚           â”‚
â”‚ generateTest()  â”‚           â”‚ Â¿success: true?
â”‚                 â”‚           â”‚     â”‚
â”‚                 â”‚           â”‚     â”œâ”€ âœ… SÃ­ â†’ Mostrar test
â”‚                 â”‚           â”‚     â”‚
â”‚                 â”‚           â”‚     â””â”€ âŒ No
â”‚                 â”‚           â”‚         â”‚
â”‚                 â”‚           â”‚         â–¼
â”‚                 â”‚  â”€â”€â”€â”€â–º Prioridad 2: Smart Synapse
â”‚                 â”‚           â”‚
â”‚                 â”‚           â”‚ Â¿success: true?
â”‚                 â”‚           â”‚     â”‚
â”‚                 â”‚           â”‚     â”œâ”€ âœ… SÃ­ â†’ Mostrar test
â”‚                 â”‚           â”‚     â”‚
â”‚                 â”‚           â”‚     â””â”€ âŒ No
â”‚                 â”‚           â”‚         â”‚
â”‚                 â”‚           â”‚         â–¼
â”‚                 â”‚  â”€â”€â”€â”€â–º Prioridad 3: Test Generation
â”‚                 â”‚           â”‚
â”‚                 â”‚           â””â”€ â†’ Mostrar test
â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Â¡Esto es cÃ³mo estÃ¡ integrado Playwright MCP!** ğŸš€âœ¨
