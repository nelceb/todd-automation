# ๐ฏ DIAGRAMA COMPLETO: INTEGRACIรN PLAYWRIGHT MCP EN TODD

## ๐ ARQUITECTURA GENERAL

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        CAPA DE PRESENTACIรN                           โ
โ                                                                       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ            TestGenerator.tsx (Cliente React)                    โ โ
โ  โ                                                                 โ โ
โ  โ  โข Usuario ingresa ticket: "QA-2333"                           โ โ
โ  โ  โข Extrae acceptance criteria desde Jira                       โ โ
โ  โ  โข Muestra UI de loading                                       โ โ
โ  โ  โข Renderiza test generado                                     โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                โ
                                โ HTTP POST Request
                                โ { acceptanceCriteria: "..." }
                                โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      CAPA DE API (Next.js Server)                    โ
โ                                                                       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ         /api/playwright-mcp/route.ts                           โ โ
โ  โ                                                                 โ โ
โ  โ  POST /api/playwright-mcp                                      โ โ
โ  โ                                                                 โ โ
โ  โ  1. Verificar credenciales                                     โ โ
โ  โ  2. Interpretar acceptance criteria                            โ โ
โ  โ  3. Ejecutar Playwright (si hay credenciales)                  โ โ
โ  โ  4. Generar test                                               โ โ
โ  โ  5. Devolver resultado                                         โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                โ                                      โ
โ                                โ Si success: false                   โ
โ                                โ                                      โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ         /api/smart-synapse/route.ts (Fallback 1)               โ โ
โ  โ                                                                 โ โ
โ  โ  POST /api/smart-synapse                                       โ โ
โ  โ  โข Anรกlisis dinรกmico de codebase                               โ โ
โ  โ  โข Sinapsis inteligente con keywords                           โ โ
โ  โ  โข Generaciรณn de mรฉtodos                                       โ โ
โ  โ  โข Test generado                                               โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                โ                                      โ
โ                                โ Si success: false                   โ
โ                                โ                                      โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ         /api/generate-test/route.ts (Fallback 2)               โ โ
โ  โ                                                                 โ โ
โ  โ  POST /api/generate-test                                      โ โ
โ  โ  โข Generaciรณn clรกsica basada en templates                     โ โ
โ  โ  โข Test generado                                              โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                โ
                                โ chromium.launch()
                                โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              PROCESO PLAYWRIGHT (Server Node.js)                    โ
โ                                                                       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ        Chromium Browser (Headless)                              โ โ
โ  โ                                                                 โ โ
โ  โ  โข page.goto('https://cook-unity.com/login')                    โ โ
โ  โ  โข page.fill('email')                                           โ โ
โ  โ  โข page.fill('password')                                        โ โ
โ  โ  โข page.click('submit')                                         โ โ
โ  โ  โข page.waitForURL('/menu')                                     โ โ
โ  โ  โข page.goto(targetURL)                                         โ โ
โ  โ  โข page.$$('[data-testid]') โ Observa elementos                โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ FLUJO DE EJECUCIรN PASO A PASO

### **ESCENARIO 1: Playwright MCP con Credenciales (รXITO)**

```
โโโโโโโโโโโโโโโโโโโ
โ   USUARIO       โ
โ                 โ
โ Input: "QA-2333"โ
โ Click: Generate โ
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  TestGenerator.tsx              โ
โ  (Cliente React)                โ
โ                                 โ
โ  generateTestFromCriteria()    โ
โ  โโ setLoading(true)            โ
โ  โโ fetch('/api/playwright-mcp')โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
         โ
         โ POST { acceptanceCriteria: "Date Selector Filter Reset" }
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  /api/playwright-mcp/route.ts   โ
โ  (Server Next.js)               โ
โ                                 โ
โ  1๏ธโฃ Verificar credenciales      โ
โ     โโ hasCredentials = โ       โ
โ     โโ process.env.TEST_EMAIL   โ
โ        && VALID_LOGIN_PASSWORD  โ
โ                                 โ
โ  2๏ธโฃ Interpretar acceptance     โ
โ     โโ detectContext()          โ
โ     โ  โโ โ 'ordersHub'         โ
โ     โโ extractActions()          โ
โ     โ  โโ โ [{ type: 'click',   โ
โ     โ          element: 'dateSelector' }]
โ     โโ extractAssertions()      โ
โ     โ  โโ โ [{ type: 'state',   โ
โ     โ          description: 'Filter reset' }]
โ     โโ determineURL()            โ
โ        โโ โ 'https://cook-unity.com/orders-hub'
โ                                 โ
โ  3๏ธโฃ Ejecutar Playwright         โ
โ     โโ chromium.launch()         โ
โ     โ  โโ โ Browser instance    โ
โ     โโ browser.newContext()     โ
โ     โ  โโ โ Context (cookies, storage)
โ     โโ context.newPage()        โ
โ     โ  โโ โ Page object         โ
โ                                 โ
โ  4๏ธโฃ Login                        โ
โ     โโ page.goto('/login')      โ
โ     โโ page.fill('email')       โ
โ     โโ page.fill('password')    โ
โ     โโ page.click('submit')     โ
โ     โโ page.waitForURL('/menu') โ
โ        โโ โ Login exitoso      โ
โ                                 โ
โ  5๏ธโฃ Navegar a URL objetivo      โ
โ     โโ page.goto('orders-hub')  โ
โ     โโ page.waitForLoadState()  โ
โ        โโ โ Navegaciรณn exitosa โ
โ                                 โ
โ  6๏ธโฃ Observar comportamiento    โ
โ     โโ page.$$('[data-testid]') โ
โ     โ  โโ โ Todos los elementos โ
โ     โโ element.isVisible()      โ
โ     โ  โโ โ Filtra visibles     โ
โ     โโ behavior.elements = [...]โ
โ                                 โ
โ  7๏ธโฃ Generar test               โ
โ     โโ generateTestFromObservations()
โ     โ  โโ Crear tรญtulo         โ
โ     โ  โโ Determinar tags      โ
โ     โ  โโ Agregar GIVEN         โ
โ     โ  โโ Agregar WHEN (desde behavior)
โ     โ  โโ Agregar THEN         โ
โ     โโ smartTest = "test('QA-...', ..."
โ                                 โ
โ  8๏ธโฃ Cerrar navegador           โ
โ     โโ browser.close()          โ
โ                                 โ
โ  9๏ธโฃ Devolver respuesta         โ
โ     โโ return {                 โ
โ          success: true,         โ
โ          smartTest: "...",      โ
โ          mode: 'real'           โ
โ        }                        โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
         โ
         โ Response: { success: true, smartTest: "..." }
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  TestGenerator.tsx              โ
โ                                 โ
โ  if (mcpData.success) {        โ
โ    setGeneratedTest({           โ
โ      content: mcpData.smartTest โ
โ    })                           โ
โ    setStep('result')            โ
โ    return // โ รxito, no hace  โ
โ           //  fallback          โ
โ  }                              โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโ
โ   USUARIO       โ
โ                 โ
โ โ Test generadoโ
โ    (basado en   โ
โ    observaciรณn  โ
โ    real)        โ
โโโโโโโโโโโโโโโโโโโ
```

---

### **ESCENARIO 2: Sin Credenciales (Modo Simulado)**

```
โโโโโโโโโโโโโโโโโโโ
โ   USUARIO       โ
โ Input: "QA-2333" โ
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  /api/playwright-mcp/route.ts   โ
โ                                 โ
โ  1๏ธโฃ Verificar credenciales      โ
โ     โโ hasCredentials = โ       โ
โ     โโ No hay TEST_EMAIL        โ
โ                                 โ
โ  2๏ธโฃ Modo Simulado               โ
โ     โโ interpretAcceptanceCriteria()
โ     โโ simulateBehavior()       โ
โ     โ  โโ โ behavior.interactions = [
โ     โ          { element: 'dateSelector',
โ     โ            observed: true,
โ     โ            simulated: true }]
โ     โโ generateTestFromObservations()
โ     โโ return {                 โ
โ          success: true,         โ
โ          smartTest: "...",      โ
โ          mode: 'simulated'       โ
โ        }                        โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
         โ
         โ Response: { success: true, mode: 'simulated' }
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  TestGenerator.tsx              โ
โ                                 โ
โ  if (mcpData.success) {        โ
โ    โ Usa resultado              โ
โ    (igual que antes, pero mรกs   โ
โ     rรกpido, sin navegar)        โ
โ  }                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

### **ESCENARIO 3: Playwright MCP Falla (Fallback)**

```
โโโโโโโโโโโโโโโโโโโ
โ   USUARIO       โ
โ Input: "QA-2333" โ
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  /api/playwright-mcp/route.ts   โ
โ                                 โ
โ  1๏ธโฃ Intentar navegaciรณn         โ
โ     โโ chromium.launch()        โ
โ     โโ loginToApp()             โ
โ     โโ โ Login falla            โ
โ        (timeout, credenciales   โ
โ         incorrectas, etc.)      โ
โ                                 โ
โ  2๏ธโฃ Manejar error                โ
โ     โโ browser.close()           โ
โ     โโ return {                 โ
โ          success: false,        โ
โ          error: "Login failed", โ
โ          fallback: true         โ
โ        }                        โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
         โ
         โ Response: { success: false, fallback: true }
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  TestGenerator.tsx              โ
โ                                 โ
โ  if (mcpData.success) {        โ
โ    // โ No entra aquรญ           โ
โ  }                              โ
โ                                 โ
โ  // 2. Fallback automรกtico      โ
โ  const smartResponse = await fetch('/api/smart-synapse')
โ  โโ โ Llama a Smart Synapse     โ
โ     โโ โ Genera test (como antes)
โ                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ INTEGRACIรN ENTRE COMPONENTES

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    DIAGRAMA DE INTEGRACIรN                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโ
โ  USER       โ
โ  (Browser)  โ
โโโโโโโโฌโโโโโโโ
       โ
       โ 1. Ingresa "QA-2333"
       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  TestGenerator.tsx                                           โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ  fetchJiraIssue()                                      โ  โ
โ  โ  โโ GET /api/jira?issueKey=QA-2333                     โ  โ
โ  โ  โโ โ acceptanceCriteria = {                          โ  โ
โ  โ         description: "Date Selector Filter Reset"      โ  โ
โ  โ       }                                                โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                              โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ  generateTestFromCriteria()                            โ  โ
โ  โ                                                         โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ  โ
โ  โ  โ  INTENTO 1: Playwright MCP                        โ โ  โ
โ  โ  โ  fetch('/api/playwright-mcp', {                    โ โ  โ
โ  โ  โ    body: { acceptanceCriteria }                    โ โ  โ
โ  โ  โ  })                                                โ โ  โ
โ  โ  โ                                                     โ โ  โ
โ  โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ โ  โ
โ  โ  โ  โ  if (mcpData.success) {                     โ  โ โ  โ
โ  โ  โ  โ    โ Usar mcpData.smartTest                 โ  โ โ  โ
โ  โ  โ  โ    return (no hace fallback)                 โ  โ โ  โ
โ  โ  โ  โ  }                                           โ  โ โ  โ
โ  โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ  โ
โ  โ                                                         โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ  โ
โ  โ  โ  INTENTO 2: Smart Synapse (si MCP falla)          โ โ  โ
โ  โ  โ  fetch('/api/smart-synapse', {                     โ โ  โ
โ  โ  โ    body: { acceptanceCriteria }                    โ โ  โ
โ  โ  โ  })                                                โ โ  โ
โ  โ  โ                                                     โ โ  โ
โ  โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ โ  โ
โ  โ  โ  โ  if (smartData.success) {                   โ  โ โ  โ
โ  โ  โ  โ    โ Usar smartData.smartTest               โ  โ โ  โ
โ  โ  โ  โ    return (no hace fallback final)           โ  โ โ  โ
โ  โ  โ  โ  }                                           โ  โ โ  โ
โ  โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ  โ
โ  โ                                                         โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ  โ
โ  โ  โ  INTENTO 3: Test Generation Clรกsico               โ โ  โ
โ  โ  โ  fetch('/api/generate-test', {                    โ โ  โ
โ  โ  โ    body: { acceptanceCriteria }                   โ โ  โ
โ  โ  โ  })                                               โ โ  โ
โ  โ  โ                                                    โ โ  โ
โ  โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ โ  โ
โ  โ  โ  โ  if (data.success) {                         โ โ โ  โ
โ  โ  โ  โ    โ Usar data.generatedTest                โ โ โ  โ
โ  โ  โ  โ  }                                           โ โ โ  โ
โ  โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ โ  โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       โ
       โ HTTP Request
       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  /api/playwright-mcp/route.ts                                โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ  POST handler                                           โ โ
โ  โ                                                         โ โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ  โ  Verificar credenciales                            โ โ โ
โ  โ  โ  โโ Si NO hay โ Modo simulado                     โ โ โ
โ  โ  โ  โโ Si hay โ Playwright real                      โ โ โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ                                                         โ โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ  โ  Modo Real:                                        โ โ โ
โ  โ  โ  โโ chromium.launch()                             โ โ โ
โ  โ  โ  โโ loginToApp()                                  โ โ โ
โ  โ  โ  โโ navigateToTargetURL()                        โ โ โ
โ  โ  โ  โโ observeBehavior()                            โ โ โ
โ  โ  โ  โโ generateTestFromObservations()                โ โ โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ                                                         โ โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โ  โ  Modo Simulado:                                   โ โ โ
โ  โ  โ  โโ interpretAcceptanceCriteria()                โ โ โ
โ  โ  โ  โโ simulateBehavior()                           โ โ โ
โ  โ  โ  โโ generateTestFromObservations()                โ โ โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       โ
       โ chromium.launch()
       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Chromium Browser (Headless, en Server)                      โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ  Page Object                                            โ โ
โ  โ  โโ goto('/login')                                       โ โ
โ  โ  โโ fill('email')                                       โ โ
โ  โ  โโ fill('password')                                   โ โ
โ  โ  โโ click('submit')                                    โ โ
โ  โ  โโ waitForURL('/menu')                                โ โ
โ  โ  โโ goto(targetURL)                                    โ โ
โ  โ  โโ $$('[data-testid]') โ Observa elementos            โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ COMPONENTES CLAVE Y SUS RESPONSABILIDADES

### **1. TestGenerator.tsx (Cliente)**
- **Responsabilidad:** UI, orquestaciรณn de llamadas API
- **Funciรณn principal:** `generateTestFromCriteria()`
- **Lรณgica:** Intentar Playwright MCP โ Smart Synapse โ Test Generation

### **2. /api/playwright-mcp/route.ts (Server)**
- **Responsabilidad:** Ejecutar navegaciรณn real o simulada
- **Funciones clave:**
  - `loginToApp()`: Login en la app
  - `navigateToTargetURL()`: Navegar a URL objetivo
  - `observeBehavior()`: Observar elementos reales
  - `simulateBehavior()`: Simular cuando no hay credenciales
  - `generateTestFromObservations()`: Generar test final

### **3. Chromium Browser (Proceso separado)**
- **Responsabilidad:** Ejecutar navegaciรณn real
- **Lugar:** Server Node.js (headless)
- **Comunicaciรณn:** Vรญa Playwright API

---

## ๐ฏ DECISIรN DE FLUJO (รrbol de Decisiรณn)

```
                    ยฟUsuario ingresa ticket?
                            โ
                            โผ
                    ยฟFetch Jira exitoso?
                            โ
                            โผ
                    ยฟGenerar test?
                            โ
                            โผ
              โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
              โ ยฟIntentar Playwright MCP?    โ
              โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโ
                             โ
              โโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโ
              โ                               โ
              โผ                               โผ
    ยฟHay credenciales?              ยฟModo simulado?
              โ                               โ
      โโโโโโโโโดโโโโโโโโ                       โ
      โ               โ                       โ
      โผ               โผ                       โผ
  Login real      ยฟLogin OK?            Generar test
      โ               โ                  (sin navegar)
      โ               โ                       โ
      โ         โโโโโโโดโโโโโโ                โ
      โ         โ           โ                โ
      โผ         โผ           โผ                โ
  Error    Navegar     ยฟNavegaciรณn OK?       โ
      โ         โ           โ                โ
      โ         โ      โโโโโโดโโโโโ          โ
      โ         โ      โ         โ          โ
      โ         โ      โผ         โผ          โ
      โ         โ   Observar  Error        โ
      โ         โ      โ         โ         โ
      โ         โ      โผ         โ         โ
      โ         โ  Generar test  โ         โ
      โ         โ      โ         โ         โ
      โโโโโโโโโโโดโโโโโโโดโโโโโโโโโโ         โ
              โ                            โ
              โ                            โ
              โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโ
                           โ
                           โผ
                    ยฟsuccess: true?
                           โ
              โโโโโโโโโโโโโโดโโโโโโโโโโโโโ
              โ                        โ
              โผ                        โผ
    โ Mostrar test           ยฟFallback a Smart
    generado                      Synapse?
                                        โ
                           โโโโโโโโโโโโโโดโโโโโโโโโโโโโ
                           โ                        โ
                           โผ                        โผ
                  โ Mostrar test           ยฟFallback a Test
                  generado (Smart            Generation?
                  Synapse)                        โ
                                          โโโโโโโโโโดโโโโโโโโโ
                                          โ                โ
                                          โผ                โผ
                                    โ Test generado   โ Error
```

---

## ๐ฏ RESUMEN EJECUTIVO

**Playwright MCP estรก integrado en TODD de la siguiente manera:**

1. **Prioridad 1:** Playwright MCP (intenta navegaciรณn real)
2. **Prioridad 2:** Smart Synapse (anรกlisis inteligente sin navegaciรณn)
3. **Prioridad 3:** Test Generation (mรฉtodo clรกsico)

**Si Playwright MCP funciona:** Genera test desde observaciรณn real โ Test mรกs preciso
**Si Playwright MCP falla:** Fallback automรกtico โ Usuario siempre recibe test generado

**El usuario NO nota diferencias en la UI**, solo en la calidad del test generado. ๐โจ
